/****************************************Copyright (c)************************************************************
**                              
**                                 
**                                  
**--------------文件信息------------------------------------------------------------------------------------------
**文   件   名: FileSystem.h
**创   建   人: 杨承凯(kady1984@163.com)
**创 建 日  期: 2008年04月21日
**最后修改日期: 2008年04月21日
**描        述: SCSI协议实现函数
*****************************************************************************************************************/
#ifndef _FILESYS_H_
#define _FILESYS_H_

//头文件==========================================================================================================
#include "SdMmc.h"

//函数编译控制====================================================================================================
//#define _FILE_OPEN_
//#define _FILE_READ_
//#define _FILE_WRITE_
//#define _FILE_DELETE_
//#define _FILE_EOF_
//#define _CHANGE_DIR_
//#define _MAKE_DIR_
//#define _REMOVE_DIR_
//#define _USE_DIR_ACCESS_

//结构体定义======================================================================================================
//文件描述结构定义
typedef struct
{
	unsigned int ClusterStart;			//开始簇
	unsigned long SectorCurrent;		//当前扇区
	unsigned int SectorDirentry;		
	unsigned int OffsetDirentry;
	BYTE Attrib;						//属性
	DWORD Pos;							//位置
	DWORD Size;							//文件长度
	BYTE IsOpen;						//文件是否打开
} FILE;

//函数声明========================================================================================================
/*****************************************************************************************************************
* 名	称：FileSysInit()
* 功	能：文件系统初始化
* 入口参数：无
* 出口参数：无
* 说	明：无
*****************************************************************************************************************/
void FileSysInit() reentrant;


/*****************************************************************************************************************
* 名	称：FileOpen()
* 功	能：打开文件
* 入口参数：无
* 出口参数：无
* 说	明：无
*****************************************************************************************************************/
int FileOpen(FILE* f, char* filename, char* mode) reentrant;


/*****************************************************************************************************************
* 名	称：FileRead()
* 功	能：读文件数据
* 入口参数：无
* 出口参数：无
* 说	明：无
*****************************************************************************************************************/
unsigned FileRead(FILE* f, BYTE* buffer, unsigned count) reentrant;


/*****************************************************************************************************************
* 名	称：FileWrite()
* 功	能：写数据到文件
* 入口参数：无
* 出口参数：无
* 说	明：无
*****************************************************************************************************************/
unsigned FileWrite(FILE* f, BYTE* buffer, unsigned count) reentrant;


/*****************************************************************************************************************
* 名	称：FileClose()
* 功	能：关闭文件
* 入口参数：无
* 出口参数：无
* 说	明：无
*****************************************************************************************************************/
void FileClose(FILE* f) reentrant;


/*****************************************************************************************************************
* 名	称：FileClose()
* 功	能：删除文件
* 入口参数：无
* 出口参数：无
* 说	明：无
*****************************************************************************************************************/
int FileDelete(char* filename) reentrant;

/*****************************************************************************************************************
* 名	称：FileEOF()
* 功	能：判断文件数据是否已经到达末尾
* 入口参数：无
* 出口参数：无
* 说	明：无
*****************************************************************************************************************/
int FileEOF(FILE* f) reentrant;

/*****************************************************************************************************************
* 名	称：ChangeDir()
* 功	能：进入文件夹
* 入口参数：DirName - 名称
* 出口参数：无
* 说	明：无
*****************************************************************************************************************/
BYTE ChangeDir(char* dirname) reentrant;

/*****************************************************************************************************************
* 名	称：MakeDir()
* 功	能：创建文件夹
* 入口参数：DirName - 名称
* 出口参数：无
* 说	明：无
*****************************************************************************************************************/
BYTE MakeDir(char* dir_name) reentrant;

/*****************************************************************************************************************
* 名	称：RemoveDir()
* 功	能：删除文件夹
* 入口参数：DirName - 名称
* 出口参数：无
* 说	明：无
*****************************************************************************************************************/
BYTE RemoveDir(char* dir_name) reentrant;


#endif
